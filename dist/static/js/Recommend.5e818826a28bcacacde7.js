webpackJsonp([4],{DLTt:function(t,e){t.exports={recommend:"recommend-3uF0c_0"}},w0Sw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("//Fk"),n=s.n(i),o=s("Dd8w"),c=s.n(o),l=s("m40h"),r=s("hAM6"),a=s("NYxO"),d=s("9n/1"),m=s("1VIM"),u={mixins:[d.a,r.a,m.a],data:function(){return{recommends:[],discList:[],scrollOptions:{probeType:3,click:!0,pullDownRefresh:{threshold:80,stop:60,txt:"更新成功",stopTime:1500},directionLockThreshold:0},slideOptions:{probeType:1,click:!0,snap:{threshold:.5,loop:!0}},menuList:[{content:"取消",style:{"background-color":"#c8c7cd",color:"#fff"}},{content:"收藏",style:{"background-color":"#ffcd32",color:"#fff"}}]}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.scroll.autoPullDownRefresh()})},methods:c()({},Object(a.d)({setRecommendAlbum:"SET_RECOMMEND_ALBUM"}),{handlePlayList:function(){this.$refs.scrollWrapper.style.paddingBottom=this.playerHeight+"px",this.$refs.scroll.refresh()},_getData:function(){n.a.all([this._getRecommend(),this._getDiscList()]).then(function(t){})},_getRecommend:function(){var t=this;return Object(l.b)().then(function(e){t.recommends=e.data.slider,t.$nextTick(function(){t.$refs.scroll.refresh()})})},_getDiscList:function(){var t=this;return new n.a(function(e,s){Object(l.a)().then(function(s){window.setTimeout(function(){t.discList=s.data.list,t.$nextTick(function(){t.$refs.scroll.refresh()}),e(s)},1e3)})})},loadImage:function(){var t=this;this.checkLoaded||(this.checkLoaded=!0,this.$nextTick(function(){t.hadLoad||(t.hadLoad=!0,t.$refs.scroll.refresh())}))},selectItem:function(t,e){var s=this;this.throttle.run(function(){s.setRecommendAlbum(e),s.$router.push({name:"DetailRecommend",params:{id:e.dissid}})})},onPullingDown:function(){this._getData()},menuClick:function(t,e,s,i){"取消"===t.content?s():i(!0)},confirmDelete:function(t){this.discList.splice(t,1)}})},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"recommend",class:t.$style.recommend},[s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[s("vi-scroll",{ref:"scroll",staticStyle:{color:"gold"},attrs:{options:t.scrollOptions,data:t.discList,scrollEvents:["scroll"]},on:{scroll:t.scrollHandler,"pulling-down":t.onPullingDown}},[s("div",{staticClass:"slide-wrapper"},[s("vi-slide",{ref:"slide",attrs:{"init-page-index":0,data:t.recommends,options:t.slideOptions,"show-dots":!0,"auto-play":!0},on:{"load-image":t.loadImage}})],1),t._v(" "),s("div",{staticClass:"recommend-list"},[s("h1",{staticClass:"list-title"},[t._v("热门歌单推荐")]),t._v(" "),s("vi-swipe-group",[s("vi-collapse-transition-group",{staticClass:"recommend-ul",attrs:{tag:"ul"}},t._l(t.discList,function(e,i){return s("li",{key:e.dissname,staticClass:"item",on:{click:function(s){t.selectItem(s,e)}}},[s("vi-swipe",{attrs:{index:i,"menu-list":t.menuList},on:{"menu-click":t.menuClick,confirm:t.confirmDelete}},[s("div",{staticClass:"item-wrapper"},[s("div",{staticClass:"icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgurl,expression:"item.imgurl"}],attrs:{width:"60",height:"60"}})]),t._v(" "),s("div",{staticClass:"text"},[s("h2",{staticClass:"name",domProps:{innerHTML:t._s(e.creator.name)}}),t._v(" "),s("p",{staticClass:"desc",domProps:{innerHTML:t._s(e.dissname)}})])])])],1)}),0)],1)],1)])],1)])},staticRenderFns:[]};var h=s("VU/8")(u,f,!1,function(t){this.$style=s("DLTt")},null,null);e.default=h.exports}});
//# sourceMappingURL=Recommend.5e818826a28bcacacde7.js.map