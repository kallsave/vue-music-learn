{"version":3,"sources":["webpack:///./src/pages/index/children/recommend/recommend.vue?adb7","webpack:///src/pages/index/children/recommend/recommend.vue","webpack:///./src/pages/index/children/recommend/recommend.vue?bdcc","webpack:///./src/pages/index/children/recommend/recommend.vue"],"names":["module","exports","recommend","recommend_recommend","mixins","inject_sticky","play_padding_bottom","create_throttle_instance","data","recommends","discList","scrollOptions","probeType","click","pullDownRefresh","threshold","stop","txt","stopTime","directionLockThreshold","slideOptions","snap","loop","menuList","content","style","background-color","color","mounted","_this","this","$nextTick","$refs","scroll","autoPullDownRefresh","methods","extends_default","Object","vuex_esm","setRecommendAlbum","handlePlayList","scrollWrapper","paddingBottom","playerHeight","refresh","_getData","promise_default","a","all","_getRecommend","_getDiscList","then","res","_this2","slider","_this3","resolve","reject","window","setTimeout","list","loadImage","_this4","checkLoaded","hadLoad","selectItem","e","item","_this5","throttle","run","$router","push","name","params","id","dissid","onPullingDown","menuClick","menu","index","shrink","toggleConfirmMenu","confirmDelete","splice","children_recommend_recommend","render","_vm","_h","$createElement","_c","_self","ref","class","$style","staticClass","staticStyle","attrs","options","scrollEvents","on","scrollHandler","pulling-down","init-page-index","show-dots","auto-play","load-image","_v","tag","_l","key","dissname","$event","menu-list","menu-click","confirm","directives","rawName","value","expression","width","height","domProps","innerHTML","_s","creator","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/Recommend.5e818826a28bcacacde7.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"recommend\":\"recommend-3uF0c_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0b3462e0\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/index/children/recommend/recommend.vue\n// module id = DLTt\n// module chunks = 4","<template>\n  <div ref=\"recommend\"\n    :class=\"$style['recommend']\">\n    <div ref=\"scrollWrapper\"\n      class=\"scroll-wrapper\">\n      <vi-scroll\n        ref=\"scroll\"\n        style=\"color: gold;\"\n        :options=\"scrollOptions\"\n        :data=\"discList\"\n        :scrollEvents=\"['scroll']\"\n        @scroll=\"scrollHandler\"\n        @pulling-down=\"onPullingDown\">\n        <div class=\"slide-wrapper\">\n          <vi-slide\n            ref=\"slide\"\n            :init-page-index=\"0\"\n            :data=\"recommends\"\n            :options=\"slideOptions\"\n            :show-dots=\"true\"\n            :auto-play=\"true\"\n            @load-image=\"loadImage\">\n          </vi-slide>\n        </div>\n        <div class=\"recommend-list\">\n          <h1 class=\"list-title\">热门歌单推荐</h1>\n          <vi-swipe-group>\n            <vi-collapse-transition-group\n              class=\"recommend-ul\"\n              tag=\"ul\">\n              <li class=\"item\"\n                v-for=\"(item, index) in discList\"\n                :key=\"item.dissname\"\n                @click=\"selectItem($event, item)\">\n                <vi-swipe\n                  :index=\"index\"\n                  :menu-list=\"menuList\"\n                  @menu-click=\"menuClick\"\n                  @confirm=\"confirmDelete\">\n                  <div class=\"item-wrapper\">\n                    <div class=\"icon\">\n                      <img width=\"60\" height=\"60\" v-lazy=\"item.imgurl\">\n                    </div>\n                    <div class=\"text\">\n                      <h2 class=\"name\" v-html=\"item.creator.name\"></h2>\n                      <p class=\"desc\" v-html=\"item.dissname\"></p>\n                    </div>\n                  </div>\n                </vi-swipe>\n              </li>\n            </vi-collapse-transition-group>\n          </vi-swipe-group>\n        </div>\n      </vi-scroll>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getRecommend, getDiscList } from '@/api/recommend.js'\nimport playerPaddingBottom from '@/common/mixins/play-padding-bottom.js'\nimport { mapMutations } from 'vuex'\nimport { injectSticky } from '../../mixins/inject-sticky.js'\nimport createThrottleInstance from '@/common/mixins/create-throttle-instance.js'\n\nexport default {\n  mixins: [\n    injectSticky,\n    playerPaddingBottom,\n    createThrottleInstance,\n  ],\n  data() {\n    return {\n      recommends: [],\n      discList: [],\n      scrollOptions: {\n        probeType: 3,\n        click: true,\n        pullDownRefresh: {\n          // 阀值\n          threshold: 80,\n          // 滞留的位置\n          stop: 60,\n          txt: '更新成功',\n          stopTime: 1500\n        },\n        directionLockThreshold: 0,\n      },\n      slideOptions: {\n        probeType: 1,\n        click: true,\n        snap: {\n          threshold: 0.5,\n          loop: true,\n        },\n      },\n      menuList: [\n        {\n          content: '取消',\n          style: {\n            'background-color': '#c8c7cd',\n            'color': '#fff'\n          }\n        },\n        {\n          content: '收藏',\n          style: {\n            'background-color': '#ffcd32',\n            'color': '#fff'\n          }\n        }\n      ]\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.$refs.scroll.autoPullDownRefresh()\n    })\n  },\n  methods: {\n    ...mapMutations({\n      setRecommendAlbum: 'SET_RECOMMEND_ALBUM',\n    }),\n    handlePlayList() {\n      this.$refs.scrollWrapper.style.paddingBottom = `${this.playerHeight}px`\n      this.$refs.scroll.refresh()\n    },\n    _getData() {\n      Promise.all([this._getRecommend(), this._getDiscList()]).then((res) => {})\n    },\n    _getRecommend() {\n      return getRecommend().then((res) => {\n        this.recommends = res.data.slider\n        this.$nextTick(() => {\n          this.$refs.scroll.refresh()\n        })\n      })\n    },\n    _getDiscList() {\n      return new Promise((resolve, reject) => {\n        getDiscList().then((res) => {\n          window.setTimeout(() => {\n            this.discList = res.data.list\n            this.$nextTick(() => {\n              this.$refs.scroll.refresh()\n            })\n            resolve(res)\n          }, 1000)\n        })\n      })\n    },\n    loadImage() {\n      if (!this.checkLoaded) {\n        this.checkLoaded = true\n        this.$nextTick(() => {\n          if (this.hadLoad) {\n            return\n          }\n          this.hadLoad = true\n          this.$refs.scroll.refresh()\n        })\n      }\n    },\n    selectItem(e, item) {\n      this.throttle.run(() => {\n        this.setRecommendAlbum(item)\n        this.$router.push({\n          name: 'DetailRecommend',\n          params: {\n            id: item.dissid\n          }\n        })\n      })\n    },\n    onPullingDown() {\n      this._getData()\n    },\n    menuClick(menu, index, shrink, toggleConfirmMenu) {\n      if (menu.content === '取消') {\n        shrink()\n      } else {\n        toggleConfirmMenu(true)\n      }\n    },\n    confirmDelete(index) {\n      this.discList.splice(index, 1)\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\" module>\n@import \"~@/common/stylus/var/color.styl\"\n@import \"~@/common/stylus/var/font-size.styl\"\n\n.recommend\n  width: 100%\n  height: calc(100vh - 44px)\n  overflow: hidden\n  :global\n    .scroll-wrapper\n      box-sizing: border-box\n      width: 100%\n      height: 100%\n      .slide-wrapper\n        overflow: hidden\n        .slide-item\n          box-sizing: border-box\n          float: left\n          overflow: hidden\n          text-align: center\n          a\n            display: block\n            overflow: hidden\n            text-decoration: none\n            img\n              // 让img的空白像素去掉\n              display: block\n              // img width100%会穿透宽度自适应的div(比如float)而得到一个宽度\n              // 上层的float不设置宽度会得到img的宽度\n              // 然后width生效后得到一个height,又会把上层的float的高度生效\n              // 所以slide-wrapper的高度应该由img撑起来的\n              width: 100%\n        .slide-dots\n          position: absolute\n          right: 30px\n          bottom: 12px\n          text-align: center\n          font-size: 0\n          .slide-dot\n            display: inline-block\n            margin: 0 4px\n            width: 8px\n            height: 8px\n            border-radius: 50%\n            background: $color-text-l\n            &.active\n              border-radius: 5px\n              background: $color-theme\n      .recommend-list\n        background: $color-background\n        .list-title\n          height: 65px\n          line-height: 65px\n          text-align: center\n          font-size: $font-size-medium\n          color: $color-theme\n        .recommend-ul\n          .item\n            box-sizing: border-box\n            margin: 0 0 20px 20px\n            .item-wrapper\n              display: flex\n              align-items: center\n              padding-right: 20px\n              box-sizing: border-box\n              .icon\n                flex: 0 0 60px\n                padding-right: 20px\n              .text\n                position: relative\n                display: flex\n                flex-direction: column\n                // 轴上元素的位置,column方向设置上下\n                justify-content: center\n                flex: 1\n                line-height: 20px\n                overflow: hidden\n                font-size: $font-size-medium\n                height: 60px\n                .name\n                  margin-bottom: 10px\n                  color: $color-text\n                .desc\n                  color: $color-text-d\n                .load-list-con\n                  position: absolute\n                  bottom: 10px\n                  width: 100%\n                  box-sizing: border-box\n                  &:before,&:after\n                    height: 15px\n                    background: $color-highlight-background\n                    content: \"\"\n                    display: block\n                  &:before\n                    margin-top: 7px\n                    width: 30%\n                  &:after\n                    margin-top: 12px\n                    width: 60%\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index/children/recommend/recommend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"recommend\",class:_vm.$style['recommend']},[_c('div',{ref:\"scrollWrapper\",staticClass:\"scroll-wrapper\"},[_c('vi-scroll',{ref:\"scroll\",staticStyle:{\"color\":\"gold\"},attrs:{\"options\":_vm.scrollOptions,\"data\":_vm.discList,\"scrollEvents\":['scroll']},on:{\"scroll\":_vm.scrollHandler,\"pulling-down\":_vm.onPullingDown}},[_c('div',{staticClass:\"slide-wrapper\"},[_c('vi-slide',{ref:\"slide\",attrs:{\"init-page-index\":0,\"data\":_vm.recommends,\"options\":_vm.slideOptions,\"show-dots\":true,\"auto-play\":true},on:{\"load-image\":_vm.loadImage}})],1),_vm._v(\" \"),_c('div',{staticClass:\"recommend-list\"},[_c('h1',{staticClass:\"list-title\"},[_vm._v(\"热门歌单推荐\")]),_vm._v(\" \"),_c('vi-swipe-group',[_c('vi-collapse-transition-group',{staticClass:\"recommend-ul\",attrs:{\"tag\":\"ul\"}},_vm._l((_vm.discList),function(item,index){return _c('li',{key:item.dissname,staticClass:\"item\",on:{\"click\":function($event){_vm.selectItem($event, item)}}},[_c('vi-swipe',{attrs:{\"index\":index,\"menu-list\":_vm.menuList},on:{\"menu-click\":_vm.menuClick,\"confirm\":_vm.confirmDelete}},[_c('div',{staticClass:\"item-wrapper\"},[_c('div',{staticClass:\"icon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}],attrs:{\"width\":\"60\",\"height\":\"60\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('h2',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(item.creator.name)}}),_vm._v(\" \"),_c('p',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(item.dissname)}})])])])],1)}),0)],1)],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b3462e0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index/children/recommend/recommend.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b3462e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b3462e0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index/children/recommend/recommend.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}