{"version":3,"sources":["webpack:///./src/api/rank.js","webpack:///src/pages/detail/children/detail-rank/detail-rank.vue","webpack:///./src/pages/detail/children/detail-rank/detail-rank.vue?fd35","webpack:///./src/pages/detail/children/detail-rank/detail-rank.vue"],"names":["params","arguments","length","undefined","data","Object","__WEBPACK_IMPORTED_MODULE_2__common_helpers_utils_js__","__WEBPACK_IMPORTED_MODULE_1__config__","uin","format","platform","needNewCode","instance","method","url","then","res","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","tpl","page","type","create","baseURL","validateStatus","status","interceptors","response","use","code","console","log","reject","components","MusicList","music_list","songList","isFetchSongList","mounted","this","_getMusicList","computed","extends_default","vuex_esm","title","rankAlbum","topTitle","bgImage","image","methods","_this","id","rank","topid","_normalizeSongList","songlist","$router","push","list","result","forEach","item","musicData","songid","albummid","song","detail_rank_detail_rank","render","_h","$createElement","_self","_c","attrs","is-fetch-song-list","song-list","bg-image","staticRenderFns","Component","__webpack_require__","normalizeComponent","detail_rank","__webpack_exports__"],"mappings":"yDAoCO,WAAiC,IAAbA,EAAaC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MAOhCG,EAAOC,OAAAC,EAAA,EAAAD,IAAcE,EAAA,GALzBC,IAAK,IACLC,OAAQ,OACRC,SAAU,KACVC,YAAa,KAEyCX,GACxD,OAAOK,OAAAE,EAAA,EAAAF,CAAW,WAChB,OAAOO,GACLC,OAAQ,MACRC,IAAK,kCACLd,OAAQI,IACPW,KAAK,SAACC,GACP,OAAOC,EAAAC,EAAQC,QAAQH,EAAIZ,eAM1B,WAAmC,IAAbJ,EAAaC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MASlCG,EAAOC,OAAAC,EAAA,EAAAD,IAAcE,EAAA,GAPzBI,YAAa,EACbH,IAAK,EACLY,IAAK,EACLC,KAAM,SACNC,KAAM,MACNZ,SAAU,MAE4CV,GACxD,OAAOK,OAAAE,EAAA,EAAAF,CAAW,WAEhB,OAAOA,OAAAE,EAAA,EAAAF,EACLS,IAAK,sDACLV,KAAMA,oEAxDNQ,SAAWM,EAAMK,QACrBC,QAHc,qBAIdC,eAF4B,SAEbC,GAKb,OAAO,KAKXd,EAASe,aAAaC,SAASC,IAAI,SAACD,GAElC,OAAyB,MAApBA,EAASF,QAAsC,QAApBE,EAASF,QAAqBE,EAASxB,KAAK0B,OAASvB,EAAA,GAGnFwB,QAAQC,IAAIJ,GACLX,EAAAC,EAAQe,OAAO1B,EAAA,IAHfU,EAAAC,EAAQC,QAAQS,qKCZ3BM,YACAC,UAAAC,EAAA,GAEAhC,KAJA,WAKA,OACAiC,YACAC,iBAAA,IAGAC,QAVA,WAWAC,KAAAC,iBAEAC,SAAAC,OACAtC,OAAAuC,EAAA,EAAAvC,EACA,eAEAwC,MAJA,WAKA,OAAAL,KAAAM,UAAAC,UAEAC,QAPA,WAQA,OAAAR,KAAAH,SAAAnC,OACAsC,KAAAH,SAAA,GAAAY,MAEA,MAGAC,SACAT,cADA,WACA,IAAAU,EAAAX,KAEAA,KAAAM,UAAAM,GAIA/C,OAAAgD,EAAA,EAAAhD,EACAiD,MAAAd,KAAAM,UAAAM,KACArC,KAAA,SAAAC,GACAmC,EAAAd,SAAAc,EAAAI,mBAAAvC,EAAAwC,UACAL,EAAAb,iBAAA,IAPAE,KAAAiB,QAAAC,KAAA,cAUAH,mBAdA,SAcAI,GACA,IAAAC,KAOA,OANAD,EAAAE,QAAA,SAAAC,GACA,IAAAC,EAAAD,EAAA1D,KACA2D,EAAAC,QAAAD,EAAAE,UACAL,EAAAF,KAAArD,OAAA6D,EAAA,EAAA7D,CAAA0D,MAGAH,KC9DAO,GADiBC,OAFjB,WAA0B,IAAaC,EAAb7B,KAAa8B,eAAkD,OAA/D9B,KAAuC+B,MAAAC,IAAAH,GAAwB,cAAwBI,OAAOpB,MAAA,EAAAqB,qBAA9FlC,KAA8FF,gBAAAqC,YAA9FnC,KAA8FH,SAAAuC,WAA9FpC,KAA8FQ,QAAAH,MAA9FL,KAA8FK,UAEvGgC,oBCYjBC,EAdAC,EAAA,OAcAC,CACAC,EACAd,GATA,EAEA,KAEA,KAEA,MAUAe,EAAA,QAAAJ,EAAA","file":"static/js/RankDetail.17af9d0c04d3650d0102.js","sourcesContent":["import {\r\n  jsonp,\r\n  commonParams,\r\n  API_OK,\r\n  API_ERROR,\r\n  apiHandler,\r\n} from './config'\r\n\r\nimport { deepClone } from '@/common/helpers/utils.js'\r\n\r\nimport axios from 'axios'\r\n\r\nconst baseURL = process.env.baseURL\r\n\r\nconst instance = axios.create({\r\n  baseURL: baseURL,\r\n  validateStatus(status) {\r\n    // 默认的status在200~300会Promise.resolve(res)\r\n    // return status >= 200 && status < 300\r\n    // 但是这个方法只是针对statusCode,不能对自定义的code做处理\r\n    // 统一在instance.interceptors.response设置\r\n    return true\r\n  }\r\n})\r\n\r\n// 响应拦截器,对404等或者后端自定义的code错误\r\ninstance.interceptors.response.use((response) => {\r\n  // 根据后台设置的code逻辑做处理\r\n  if ((response.status === 200 || response.status === '200') && response.data.code === API_OK) {\r\n    return Promise.resolve(response)\r\n  } else {\r\n    console.log(response)\r\n    return Promise.reject(API_ERROR)\r\n  }\r\n})\r\n\r\nexport function getTopList(params = {}) {\r\n  const defaultParams = {\r\n    uin: '0',\r\n    format: 'json',\r\n    platform: 'h5',\r\n    needNewCode: '1',\r\n  }\r\n  const data = deepClone({}, commonParams, defaultParams, params)\r\n  return apiHandler(() => {\r\n    return instance({\r\n      method: 'get',\r\n      url: 'v8/fcg-bin/fcg_myqq_toplist.fcg',\r\n      params: data\r\n    }).then((res) => {\r\n      return Promise.resolve(res.data)\r\n    })\r\n  })\r\n}\r\n\r\n// jsonp接口\r\nexport function getMusicList(params = {}) {\r\n  const defaultParams = {\r\n    needNewCode: 1,\r\n    uin: 0,\r\n    tpl: 3,\r\n    page: 'detail',\r\n    type: 'top',\r\n    platform: 'h5'\r\n  }\r\n  const data = deepClone({}, commonParams, defaultParams, params)\r\n  return apiHandler(() => {\r\n    // url是基础url, data是url参数, options是jsonp的回调参数\r\n    return jsonp({\r\n      url: 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg',\r\n      data: data,\r\n    })\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/rank.js","<template>\n  <music-list\n    :rank=\"true\"\n    :is-fetch-song-list=\"isFetchSongList\"\n    :song-list=\"songList\"\n    :bg-image=\"bgImage\"\n    :title=\"title\">\n  </music-list>\n</template>\n\n<script>\nimport MusicList from '../../components/music-list/music-list.vue'\nimport { mapGetters } from 'vuex'\nimport { getMusicList } from '@/api/rank.js'\nimport { createSong } from '@/common/class/song.js'\n\nexport default {\n  components: {\n    MusicList\n  },\n  data() {\n    return {\n      songList: [],\n      isFetchSongList: false\n    }\n  },\n  mounted() {\n    this._getMusicList()\n  },\n  computed: {\n    ...mapGetters([\n      'rankAlbum'\n    ]),\n    title() {\n      return this.rankAlbum.topTitle\n    },\n    bgImage() {\n      if (this.songList.length) {\n        return this.songList[0].image\n      }\n      return ''\n    },\n  },\n  methods: {\n    _getMusicList() {\n      // store失效返回上层\n      if (!this.rankAlbum.id) {\n        this.$router.push('IndexRank')\n        return\n      }\n      getMusicList({\n        topid: this.rankAlbum.id\n      }).then((res) => {\n        this.songList = this._normalizeSongList(res.songlist)\n        this.isFetchSongList = true\n      })\n    },\n    _normalizeSongList(list) {\n      let result = []\n      list.forEach((item) => {\n        const musicData = item.data\n        if (musicData.songid && musicData.albummid) {\n          result.push(createSong(musicData))\n        }\n      })\n      return result\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/detail/children/detail-rank/detail-rank.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('music-list',{attrs:{\"rank\":true,\"is-fetch-song-list\":_vm.isFetchSongList,\"song-list\":_vm.songList,\"bg-image\":_vm.bgImage,\"title\":_vm.title}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ba926fca\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/detail/children/detail-rank/detail-rank.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail-rank.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail-rank.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ba926fca\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./detail-rank.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/detail/children/detail-rank/detail-rank.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}