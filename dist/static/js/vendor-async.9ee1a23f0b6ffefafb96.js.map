{"version":3,"sources":["webpack:///src/components/song-list/song-list.vue","webpack:///./src/components/song-list/song-list.vue?86df","webpack:///./src/components/song-list/song-list.vue","webpack:///src/pages/detail/components/music-list/music-list.vue","webpack:///./src/pages/detail/components/music-list/music-list.vue?8194","webpack:///./src/pages/detail/components/music-list/music-list.vue","webpack:///./src/pages/index/mixins/inject-sticky.js","webpack:///./src/common/class/singer.js","webpack:///./src/components/song-list/song-list.vue?689c","webpack:///./src/common/mixins/play-padding-bottom.js","webpack:///./src/api/recommend.js","webpack:///./src/pages/detail/components/music-list/music-list.vue?78e2"],"names":["EVENT_SELECT","song_list","props","songList","type","Array","default","rank","Boolean","methods","selectItem","e","item","index","this","$emit","apply","concat","prototype","slice","call","arguments","getDesc","song","singer","album","getRankCls","getRankText","song_list_song_list","render","_vm","_h","$createElement","_c","_self","class","$style","_l","key","staticClass","on","click","$event","directives","name","rawName","value","expression","domProps","textContent","_s","_v","staticRenderFns","components_song_list_song_list","__webpack_require__","normalizeComponent","ssrContext","TRANSFORM","Object","dom","BACKDROP_FILTER","components","SongList","mixins","play_padding_bottom","create_throttle_instance","title","String","bgImage","isFetchSongList","data","scrollOptions","probeType","scrollY","computed","extends_default","vuex_esm","bgStyle","watch","handler","newVal","percent","Math","abs","imageHeight","scale","blur","opacity","min","max","$refs","style","filter","scroll","refresh","created","document","body","clientWidth","mounted","scrollBlank","height","setRouterTransition","handlePlayList","stickyWrapper","paddingBottom","back","$router","scrollHandler","_ref","y","sticky","listenScrollY","stickyChange","currentSticky","paddingTop","clientHeight","zIndex","stickyCancel","_this","throttle","run","selectPlay","list","random","push","music_list_music_list","touchstart","ref","sticky-change","sticky-cancel","attrs","options","scrollEvents","_e","song-list","select","music_list_Component","music_list_normalizeComponent","music_list","__webpack_exports__","STICKY_TOP_BAR","pos","ViScroll","$disY","scrollTo","disable","enable","injectSticky","inject","Singer","id","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","avatar","module","exports","playerPaddingBottom","playerHeight","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1_vuex__","playList","length","activated","window","setTimeout","Error","params","undefined","__WEBPACK_IMPORTED_MODULE_2__common_helpers_utils_js__","__WEBPACK_IMPORTED_MODULE_1__config__","platform","vin","needNewCode","url","defaultParams","hostUin","sin","ein","sortId","categoryId","rnd","format","instance","method","then","res","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","json","utf8","onlysong","create","baseURL","validateStatus","status","interceptors","response","use","b","c","request","responseURL","indexOf","replace","JSON","parse","code","reject","music"],"mappings":"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","file":"static/js/vendor-async.9ee1a23f0b6ffefafb96.js","sourcesContent":["<template>\n  <div :class=\"$style['song-list']\">\n    <ul>\n      <li class=\"song-list-item\"\n        v-for=\"(song, index) in songList\"\n         :key=\"index\"\n        @click=\"selectItem($event, song, index)\">\n        <div class=\"song-list-rank\" v-show=\"rank\">\n          <span :class=\"getRankCls(index)\" v-text=\"getRankText(index)\"></span>\n        </div>\n        <div class=\"song-list-content\">\n          <h2 class=\"song-list-name\">{{song.name}}</h2>\n          <p class=\"song-list-desc\">{{getDesc(song)}}</p>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nconst EVENT_SELECT = 'select'\n\nexport default {\n  props: {\n    songList: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    rank: {\n      type: Boolean,\n      default: false\n    }\n  },\n  methods: {\n    selectItem(e, item, index) {\n      // 提高组件的复用性,e的判断在其他组件完成\n      this.$emit(EVENT_SELECT, ...arguments)\n    },\n    getDesc(song) {\n      return `${song.singer}·${song.album}`\n    },\n    getRankCls(index) {\n      if (index <= 2) {\n        return `icon icon${index}`\n      } else {\n        return 'text'\n      }\n    },\n    getRankText(index) {\n      if (index > 2) {\n        return index + 1\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" module>\n@import \"~@/common/stylus/var/color.styl\"\n@import \"~@/common/stylus/var/font-size.styl\"\n@import \"~@/common/stylus/mixin.styl\"\n\n.song-list\n  :global\n    .song-list-item\n      display: flex\n      align-items: center\n      box-sizing: border-box\n      height: 64px\n      .song-list-rank\n        flex: 0 0 25px\n        width: 25px\n        margin-right: 30px\n        text-align: center\n        .icon\n          display: inline-block\n          width: 25px\n          height: 24px\n          background-size: 25px 24px\n          &.icon0\n            bg-image('./images/first')\n          &.icon1\n            bg-image('./images/second')\n          &.icon2\n            bg-image('./images/third')\n        .text\n          color: $color-theme\n          font-size: $font-size-large\n      .song-list-content\n        flex: 1\n        line-height: 20px\n        overflow: hidden\n        .song-list-name\n          no-wrap()\n          font-size: $font-size-medium\n          color: $color-text\n        .song-list-desc\n          no-wrap()\n          margin-top: 4px\n          font-size: $font-size-medium\n          color: $color-text-d\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/song-list/song-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style['song-list']},[_c('ul',_vm._l((_vm.songList),function(song,index){return _c('li',{key:index,staticClass:\"song-list-item\",on:{\"click\":function($event){_vm.selectItem($event, song, index)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rank),expression:\"rank\"}],staticClass:\"song-list-rank\"},[_c('span',{class:_vm.getRankCls(index),domProps:{\"textContent\":_vm._s(_vm.getRankText(index))}})]),_vm._v(\" \"),_c('div',{staticClass:\"song-list-content\"},[_c('h2',{staticClass:\"song-list-name\"},[_vm._v(_vm._s(song.name))]),_vm._v(\" \"),_c('p',{staticClass:\"song-list-desc\"},[_vm._v(_vm._s(_vm.getDesc(song)))])])])}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f2f8bb2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/song-list/song-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f2f8bb2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./song-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./song-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./song-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f2f8bb2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./song-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/song-list/song-list.vue\n// module id = null\n// module chunks = ","<template>\n  <div :class=\"$style['music']\">\n    <div class=\"header\">\n      <div class=\"back\" @touchstart=\"back\">\n        <i class=\"icon-back\"></i>\n      </div>\n      <h1 ref=\"title\" class=\"title\">{{title}}</h1>\n    </div>\n    <div ref=\"bgImage\" class=\"bg-image\" :style=\"bgStyle\">\n      <div ref=\"filter\" class=\"filter\"></div>\n    </div>\n    <div ref=\"stickyWrapper\"\n      class=\"sticky-wrapper\">\n      <vi-native-sticky\n        ref=\"sticky\"\n        @sticky-change=\"stickyChange\"\n        @sticky-cancel=\"stickyCancel\">\n        <vi-scroll\n          ref=\"scroll\"\n          :data=\"[songList]\"\n          :options=\"scrollOptions\"\n          :scrollEvents=\"['scroll']\"\n          @scroll=\"scrollHandler\">\n          <div ref=\"scrollBlank\" class=\"scroll-blank\">\n            <vi-native-sticky-ele v-if=\"isFetchSongList\">\n              <div class=\"play-wrapper\">\n                <div ref=\"playBtn\" class=\"play\"\n                  @click=\"random($event)\">\n                  <i class=\"icon-play\"></i>\n                  <span class=\"text\">随机播放全部</span>\n                </div>\n              </div>\n            </vi-native-sticky-ele>\n          </div>\n          <div class=\"song-list-wrapper\">\n            <song-list\n              :rank=\"rank\"\n              :song-list=\"songList\"\n              @select=\"selectItem\"></song-list>\n          </div>\n        </vi-scroll>\n      </vi-native-sticky>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SongList from '@/components/song-list/song-list.vue'\nimport playerPaddingBottom from '@/common/mixins/play-padding-bottom.js'\nimport { prefixStyle } from '@/common/helpers/dom.js'\nimport { mapGetters, mapActions, mapMutations } from 'vuex'\nimport createThrottleInstance from '@/common/mixins/create-throttle-instance.js'\n\nconst TRANSFORM = prefixStyle('transform')\nconst BACKDROP_FILTER = prefixStyle('backdrop-filter')\n\nconst RESERVED_HEIGHT = 40\n\nexport default {\n  components: {\n    SongList\n  },\n  mixins: [\n    playerPaddingBottom,\n    createThrottleInstance\n  ],\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    bgImage: {\n      type: String,\n      default: ''\n    },\n    songList: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    isFetchSongList: {\n      type: Boolean,\n      default: false\n    },\n    rank: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      scrollOptions: {\n        probeType: 3,\n        click: true\n      },\n      scrollY: 0,\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'fullScreen',\n    ]),\n    bgStyle() {\n      return `background-image:url(${this.bgImage})`\n    }\n  },\n  watch: {\n    scrollY: {\n      handler(newVal) {\n        // 契合滚动的图片放大公式\n        const percent = Math.abs(newVal / this.imageHeight)\n        let scale = 1\n        let blur = 0\n        let opacity = 0\n        if (newVal > 0) {\n          scale = 1 + percent\n        } else {\n          blur = Math.min(10, percent * 10)\n          opacity = Math.max(0, percent - 0.2)\n        }\n        this.$refs.bgImage.style[TRANSFORM] = `scale(${scale})`\n        this.$refs.title.style['opacity'] = opacity\n        this.$refs.filter.style[BACKDROP_FILTER] = `blur(${blur}px)`\n      }\n    },\n    isFetchSongList: {\n      handler(newVal) {\n        this.$refs.scroll.refresh()\n      }\n    }\n  },\n  created() {\n    this.imageHeight = document.body.clientWidth * 0.7\n  },\n  mounted() {\n    this.$refs.scrollBlank.style.height = `${this.imageHeight - RESERVED_HEIGHT}px`\n  },\n  methods: {\n    ...mapMutations({\n      setRouterTransition: 'SET_ROUTER_TRANSITION'\n    }),\n    ...mapActions([\n      'selectPlay',\n      'randomPlay',\n    ]),\n    handlePlayList() {\n      this.$refs.stickyWrapper.style.paddingBottom = `${60}px`\n      this.$refs.scroll.refresh()\n    },\n    back() {\n      this.$router.back()\n    },\n    scrollHandler({ y }) {\n      this.scrollY = y\n      this.$refs.sticky.listenScrollY(-y)\n    },\n    stickyChange(currentSticky) {\n      this.$refs.bgImage.style.paddingTop = `${currentSticky.clientHeight + RESERVED_HEIGHT}px`\n      this.$refs.bgImage.style.zIndex = 5\n    },\n    stickyCancel() {\n      this.$refs.bgImage.style.paddingTop = `70%`\n      this.$refs.bgImage.style.zIndex = 0\n    },\n    selectItem(e, item, index) {\n      this.throttle.run(() => {\n        this.selectPlay({\n          list: this.songList,\n          index: index\n        })\n      })\n    },\n    random(e) {\n      this.$router.push('/test/scroll-popup/1')\n      // this.throttle.run(() => {\n      //   this.randomPlay({\n      //     list: this.songList\n      //   })\n      // })\n    }\n  },\n}\n</script>\n\n<style lang=\"stylus\" module>\n@import \"~@/common/stylus/var/font-size.styl\"\n@import \"~@/common/stylus/var/z-index.styl\"\n@import \"~@/common/stylus/var/color.styl\"\n@import \"~@/common/stylus/mixin.styl\"\n\n.music\n  :global\n    position: absolute\n    width: 100%\n    z-index: $z-index-page\n    top: 0\n    bottom: 0\n    // left: 0\n    // right: 0\n    background: $color-background\n    .header\n      position: absolute\n      width: 100%\n      height: 40px\n      top: 0\n      left: 0\n      z-index: $z-index-page\n      .back\n        position absolute\n        top: 0\n        left: 6px\n        z-index: $z-index-normal\n        .icon-back\n          display: block\n          padding: 10px\n          font-size: $font-size-large-x\n          color: $color-theme\n      .title\n        position: absolute\n        top: 0\n        left: 10%\n        z-index: $z-index-normal\n        width: 80%\n        no-wrap()\n        text-align: center\n        line-height: 40px\n        font-size: $font-size-large\n        color: $color-text\n        opacity: 0\n    .bg-image\n      position: absolute\n      width: 100%\n      height: 0\n      // margin/padding的百分比都是父元素的宽度\n      padding-top: 70%\n      transform-origin: top\n      background-size: cover\n      z-index: 0\n      .filter\n        position: absolute\n        top: 0\n        left: 0\n        width: 100%\n        height: 100%\n        background: rgba(7, 17, 27, 0.4)\n        z-index: -1\n    .sticky-wrapper\n      position: absolute\n      box-sizing: border-box\n      top: 40px\n      bottom: 0\n      width: 100%\n      .scroll-blank\n        position: relative\n        background: transparent\n      .song-list-wrapper\n        padding: 20px 30px\n        background: $color-background\n\n    // sticky的样式要写在外围\n    .play-wrapper\n      box-sizing: border-box\n      position: absolute\n      padding-top: 20px\n      padding-bottom: 20px\n      bottom: -1px\n      width: 100%\n      // background: $color-background\n      // border-bottom: 1px solid #ccc\n      .play\n        box-sizing: border-box\n        width: 135px\n        margin: 0 auto\n        text-align: center\n        border: 1px solid $color-theme\n        color: $color-theme\n        border-radius: 100px\n        font-size: 0\n        .icon-play\n          display: inline-block\n          vertical-align: middle\n          margin-right: 6px\n          font-size: $font-size-medium-x\n        .text\n          line-height: 30px\n          display: inline-block\n          vertical-align: middle\n          font-size: $font-size-small\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/detail/components/music-list/music-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style['music']},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"back\",on:{\"touchstart\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_vm._v(\" \"),_c('h1',{ref:\"title\",staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))])]),_vm._v(\" \"),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_vm._v(\" \"),_c('div',{ref:\"stickyWrapper\",staticClass:\"sticky-wrapper\"},[_c('vi-native-sticky',{ref:\"sticky\",on:{\"sticky-change\":_vm.stickyChange,\"sticky-cancel\":_vm.stickyCancel}},[_c('vi-scroll',{ref:\"scroll\",attrs:{\"data\":[_vm.songList],\"options\":_vm.scrollOptions,\"scrollEvents\":['scroll']},on:{\"scroll\":_vm.scrollHandler}},[_c('div',{ref:\"scrollBlank\",staticClass:\"scroll-blank\"},[(_vm.isFetchSongList)?_c('vi-native-sticky-ele',[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{ref:\"playBtn\",staticClass:\"play\",on:{\"click\":function($event){_vm.random($event)}}},[_c('i',{staticClass:\"icon-play\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])])]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"rank\":_vm.rank,\"song-list\":_vm.songList},on:{\"select\":_vm.selectItem}})],1)])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ecf6e9b2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/detail/components/music-list/music-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ecf6e9b2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./music-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./music-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./music-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ecf6e9b2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./music-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/detail/components/music-list/music-list.vue\n// module id = null\n// module chunks = ","export const STICKY_TOP_BAR = 44\n\nexport function scrollHandler(pos) {\n  const ViScroll = this.ViScroll\n  if (pos.y < -STICKY_TOP_BAR) {\n    if (ViScroll.$disY !== -STICKY_TOP_BAR) {\n      ViScroll.$disY = -STICKY_TOP_BAR\n      ViScroll.scroll.refresh()\n      ViScroll.scroll.scrollTo(0, -STICKY_TOP_BAR, 0)\n      ViScroll.scroll.disable()\n    }\n  } else if (pos.y >= 0) {\n    if (ViScroll.$disY !== STICKY_TOP_BAR) {\n      ViScroll.$disY = STICKY_TOP_BAR\n      ViScroll.scroll.enable()\n      ViScroll.scroll.scrollTo(0, 0, 0)\n    }\n  }\n}\n\nexport const injectSticky = {\n  inject: ['ViScroll'],\n  methods: {\n    scrollHandler: scrollHandler\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/index/mixins/inject-sticky.js","export default class Singer {\r\n  constructor({ id, name }) {\r\n    this.id = id\r\n    this.name = name\r\n    this.avatar = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/class/singer.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"song-list\":\"song-list-cdjwD_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1f2f8bb2\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/song-list/song-list.vue\n// module id = SVxE\n// module chunks = 0","import { mapGetters } from 'vuex'\nimport { AFTER_ENTER } from '@/store/modules/router-transition-state/config.js'\n\nconst playerPaddingBottom = {\n  data() {\n    return {\n      playerHeight: '60'\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'playList',\n      'routerTransitionState'\n    ])\n  },\n  mounted() {\n    if (this.playList.length) {\n      this.handlePlayList()\n    }\n  },\n  activated() {\n    if (this.playList.length) {\n      window.setTimeout(() => {\n        this.handlePlayList()\n      }, 350)\n    }\n  },\n  // watch: {\n  //   routerTransitionState: {\n  //     handler(newVal) {\n  //       if (newVal === AFTER_ENTER) {\n  //         window.setTimeout(() => {\n  //           if (this.playList.length) {\n  //             this.handlePlayList()\n  //           }\n  //         }, 20)\n  //       }\n  //     }\n  //   }\n  // },\n  methods: {\n    handlePlayList() {\n      throw new Error('component must implement handlePlayList method')\n    }\n  },\n}\n\nexport default playerPaddingBottom\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/mixins/play-padding-bottom.js","import {\n  jsonp,\n  commonParams,\n  API_OK,\n  API_ERROR,\n  apiHandler,\n} from './config'\n\nimport { deepClone } from '@/common/helpers/utils.js'\n\nimport axios from 'axios'\n\nconst baseURL = process.env.baseURL\n\nconst instance = axios.create({\n  baseURL: baseURL,\n  validateStatus(status) {\n    // 默认的status在200~300会Promise.resolve(res)\n    // return status >= 200 && status < 300\n    // 但是这个方法只是针对statusCode,不能对自定义的code做处理\n    // 统一在instance.interceptors.response设置\n    return true\n  }\n})\n\n// 响应拦截器,对404等或者后端自定义的code错误\ninstance.interceptors.response.use((response, b, c) => {\n  if (response.request.responseURL.indexOf('qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg') !== -1) {\n    /* eslint no-useless-escape: \"off\" */\n    response.data = response.data.replace(/^\\w+\\((.*)\\)$/g, '$1')\n    response.data = JSON.parse(response.data)\n  }\n  if (response.status === 200 && response.data.code === API_OK) {\n    return Promise.resolve(response)\n  } else {\n    return Promise.reject(API_ERROR)\n  }\n})\n\n// jsonp接口\nexport function getRecommend(params = {}) {\n  const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\n  const defaultParams = {\n    platform: 'h5',\n    vin: 0,\n    needNewCode: 1\n  }\n  const data = deepClone({}, commonParams, defaultParams, params)\n  return apiHandler(() => {\n    // url是基础url, data是url参数, options是jsonp的回调参数\n    return jsonp({\n      url,\n      data,\n    })\n  })\n}\n\nexport function getDiscList(params = {}) {\n  const url = 'splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg'\n  const defaultParams = {\n    platform: 'yqq',\n    hostUin: 0,\n    sin: 0,\n    ein: 29,\n    sortId: 5,\n    needNewCode: 0,\n    categoryId: 10000000,\n    rnd: Math.random(),\n    format: 'json'\n  }\n  const data = deepClone({}, commonParams, defaultParams, params)\n  return apiHandler(() => {\n    return instance({\n      method: 'get',\n      url: url,\n      params: data\n    }).then((res) => {\n      return Promise.resolve(res.data)\n    })\n  })\n}\n\nexport function getSongList(params = {}) {\n  const url = 'qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg'\n  const defaultParams = {\n    type: 1,\n    json: 1,\n    utf8: 1,\n    onlysong: 0,\n    platform: 'yqq',\n    hostUin: 0,\n    needNewCode: 0,\n  }\n  const data = deepClone({}, commonParams, defaultParams, params)\n  return apiHandler(() => {\n    return instance({\n      method: 'get',\n      url: url,\n      params: data\n    }).then((res) => {\n      return Promise.resolve(res.data)\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/recommend.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"music\":\"music-2TvtQ_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-ecf6e9b2\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/detail/components/music-list/music-list.vue\n// module id = oZUM\n// module chunks = 0"],"sourceRoot":""}