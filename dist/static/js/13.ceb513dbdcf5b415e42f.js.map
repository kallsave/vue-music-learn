{"version":3,"sources":["webpack:///src/pages/test/children/promise-partner/component/test-dialog.vue","webpack:///./src/pages/test/children/promise-partner/component/test-dialog.vue?cdee","webpack:///./src/pages/test/children/promise-partner/component/test-dialog.vue","webpack:///src/pages/test/children/promise-partner/promise-partner.vue","webpack:///./src/pages/test/children/promise-partner/promise-partner.vue?409c","webpack:///./src/pages/test/children/promise-partner/promise-partner.vue","webpack:///./src/pages/test/children/promise-partner/component/test-dialog.vue?1530","webpack:///./src/pages/test/children/promise-partner/promise-partner.vue?641d"],"names":["test_dialog","props","options","type","Array","default","data","cacheData","watch","handler","newVal","oldVal","_this","this","$nextTick","fillData","immediate","_this2","created","console","log","mounted","methods","show","$refs","popup","maskClick","hide","component_test_dialog","render","_vm","_h","$createElement","_c","_self","ref","class","$style","attrs","is-use-absolute","on","mask-click","staticClass","_l","item","index","key","active","indexOf","_v","_s","staticRenderFns","promise_partner_component_test_dialog","__webpack_require__","normalizeComponent","ssrContext","OPTIONS","promise_partner","components","TestDialog","setOptionsData","showDialog","createOptions","optionsLength","Object","utils","length","slice","createData","dataLength","syncOptionsData","syncDataOptions","asyncOptions","window","setTimeout","asyncData","asyncOptionsData","_this3","asyncDataOptions","_this4","promise_partner_promise_partner","click","promise_partner_Component","promise_partner_normalizeComponent","__webpack_exports__","module","exports","test-dialog","promise-partner"],"mappings":"wGAgBA,IAAAA,GACAC,OACAC,SACAC,KAAAC,MACAC,QAFA,WAGA,WAGAC,MACAH,KAAAC,MACAC,QAFA,WAGA,YAIAC,KAfA,WAgBA,OACAC,eAGAC,OAKAF,MACAG,QADA,SACAC,EAAAC,GAAA,IAAAC,EAAAC,KACAA,KAAAC,UAAA,WACAF,EAAAG,SAAAL,EAAAE,EAAAV,YAuBAc,WAAA,GAEAd,SACAO,QADA,SACAC,EAAAC,GAAA,IAAAM,EAAAJ,KACAA,KAAAC,UAAA,WACAG,EAAAF,SAAAE,EAAAX,KAAAI,MAiBAM,WAAA,IAGAE,QA5EA,WA6EAC,QAAAC,IAAA,WAEAC,QA/EA,aAiFAC,SACAP,SADA,SACAT,EAAAJ,GACAW,KAAAN,UAAAD,GAEAiB,KAJA,WAKAV,KAAAW,MAAAC,MAAAF,QAEAG,UAPA,WAQAb,KAAAW,MAAAC,MAAAE,UCtGAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,YAAsBE,IAAA,QAAAC,MAAAN,EAAAO,OAAA,eAAAC,OAAmDC,mBAAA,GAAuBC,IAAKC,aAAAX,EAAAJ,aAA4BO,EAAA,OAAYS,YAAA,QAAmBZ,EAAAa,GAAAb,EAAA,iBAAAc,EAAAC,GAA2C,OAAAZ,EAAA,OAAiBa,IAAAD,EAAAH,YAAA,OAAAN,OAAoCW,QAAA,IAAAjB,EAAAvB,UAAAyC,QAAAJ,MAA8Cd,EAAAmB,GAAAnB,EAAAoB,GAAAN,QAAyB,MAE/YO,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,CACAtD,EACA4B,GATA,EAVA,SAAA2B,GACA1C,KAAA,OAAAwC,EAAA,SAaA,KAEA,MAUA,oBCVAG,GAAA,qBAEAC,GACAC,YACAC,WAAAP,GAEA9C,KAJA,WAKA,OACAJ,WACAI,UAGAY,QAVA,WAWAL,KAAA+C,kBAEAtC,SACAuC,WADA,WAEAhD,KAAAW,MAAAmC,WAAApC,QAGAuC,cALA,WAMA,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAA,EAAAR,EAAAU,QACA,OAAAF,OAAAC,EAAA,EAAAD,CAAAR,GAAAW,MAAA,EAAAJ,IAGAK,WAVA,SAUAlE,GACA,IAAA6D,EAAA7D,EAAAgE,OAAA,EACAG,EAAAL,OAAAC,EAAA,EAAAD,CAAA,EAAAD,GACA,OAAAC,OAAAC,EAAA,EAAAD,CAAA9D,GAAAiE,MAAA,EAAAE,IAEAT,eAfA,WAgBA,IAAA1D,EAAAW,KAAAiD,gBACAjD,KAAAuD,WAAAlE,IAcAoE,gBA/BA,SA+BApE,EAAAI,GACAO,KAAAX,UACAW,KAAAP,QAGAiE,gBApCA,SAoCArE,EAAAI,GACAO,KAAAP,OACAO,KAAAX,WAGAsE,aAzCA,SAyCAtE,EAAAI,GAAA,IAAAM,EAAAC,KACAA,KAAAP,OACAmE,OAAAC,WAAA,WACA9D,EAAAV,WACA,MAGAyE,UAhDA,SAgDAzE,EAAAI,GAAA,IAAAW,EAAAJ,KACAA,KAAAX,UACAuE,OAAAC,WAAA,WACAzD,EAAAX,QACA,MAGAsE,iBAvDA,SAuDA1E,EAAAI,GAAA,IAAAuE,EAAAhE,KACA4D,OAAAC,WAAA,WACAG,EAAA3E,WACA,KACAuE,OAAAC,WAAA,WACAG,EAAAvE,QACA,MAGAwE,iBAhEA,SAgEA5E,EAAAI,GAAA,IAAAyE,EAAAlE,KACA4D,OAAAC,WAAA,WACAK,EAAAzE,QACA,KACAmE,OAAAC,WAAA,WACAK,EAAA7E,WACA,QClGA8E,GADiBnD,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,MAAAN,EAAAO,OAAA,qBAAoCJ,EAAA,OAAYS,YAAA,MAAAF,IAAsByC,MAAAnD,EAAA+B,cAAwB/B,EAAAmB,GAAA,OAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,OAAsCS,YAAA,MAAAF,IAAsByC,MAAAnD,EAAA+B,cAAwB/B,EAAAmB,GAAA,OAAAnB,EAAAmB,GAAA,KAAAhB,EAAA,eAA8CE,IAAA,aAAAG,OAAwBpC,QAAA4B,EAAA5B,QAAAI,KAAAwB,EAAAxB,SAAuC,IAExX6C,oBCCjB,IAcA+B,EAdA7B,EAAA,OAcA8B,CACA1B,EACAuB,GATA,EAVA,SAAAzB,GACA1C,KAAA,OAAAwC,EAAA,SAaA,KAEA,MAUA+B,EAAA,QAAAF,EAAA,8BCzBAG,EAAAC,SAAkBC,cAAA,2CCAlBF,EAAAC,SAAkBE,kBAAA","file":"static/js/13.ceb513dbdcf5b415e42f.js","sourcesContent":["<template>\n  <vi-popup\n    ref=\"popup\"\n    :is-use-absolute=\"true\"\n    :class=\"$style['test-dialog']\"\n    @mask-click=\"maskClick\">\n    <div class=\"list\">\n      <div class=\"item\"\n        v-for=\"(item, index) in options\"\n        :key=\"index\"\n        :class=\"{'active': cacheData.indexOf(item) !== -1}\">{{item}}</div>\n    </div>\n  </vi-popup>\n</template>\n\n<script>\nexport default {\n  props: {\n    options: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    data: {\n      type: Array,\n      default() {\n        return []\n      }\n    }\n  },\n  data() {\n    return {\n      cacheData: []\n    }\n  },\n  watch: {\n    // 在一个更新周期watch中,写在前面的先执行\n    // 比如this.options = 1;this.data = 1;会先执行watch.data再watch.options\n    // 对于一般列表页,options通常只会更新两次(一次是初始化,一次是不会再变的异步数据)\n    // 而data会无数次更新,而异步数据的data是依赖于异步数据的options,所以做了处理\n    data: {\n      handler(newVal, oldVal) {\n        this.$nextTick(() => {\n          this.fillData(newVal, this.options)\n        })\n        // if (oldVal !== undefined) {\n        //   this.dataChangeTime++\n        //   if (this.dataChangeTime === 1) {\n        //     console.log(newVal.length)\n        //     this.optionsPromise.then((options) => {\n        //       let data = newVal\n        //       this.fillData(data, options)\n        //     })\n        //   } else {\n        //     let data = newVal\n        //     let options = this.options\n        //     this.fillData(data, options)\n        //   }\n        // } else {\n        //   // create初始化的时候执行这里\n        //   this.$nextTick(() => {\n        //     this.fillData(newVal, this.options)\n        //   })\n        //   this.dataChangeTime = 0\n        // }\n      },\n      immediate: true\n    },\n    options: {\n      handler(newVal, oldVal) {\n        this.$nextTick(() => {\n          this.fillData(this.data, newVal)\n        })\n        // 每一次更新结束会产生一个promise,在下一次更新resolve上一个promise\n        // if (oldVal !== undefined) {\n        //   console.log('options异步更新', this.options)\n        //   if (this.dataChangeTime === 0 || this.dataChangeTime === 1) {\n        //     console.log('this.dataChangeTime', this.dataChangeTime)\n        //     this.optionsPromiseResolve(newVal)\n        //   }\n        // }\n        // if (this.dataChangeTime === 0) {\n        //   this.optionsPromise = new Promise((resolve) => {\n        //     console.log('first')\n        //     this.optionsPromiseResolve = resolve\n        //   })\n        // }\n      },\n      immediate: true\n    },\n  },\n  created() {\n    console.log('create')\n  },\n  mounted() {\n  },\n  methods: {\n    fillData(data, options) {\n      this.cacheData = data\n    },\n    show() {\n      this.$refs.popup.show()\n    },\n    maskClick() {\n      this.$refs.popup.hide()\n    }\n  },\n}\n</script>\n\n<style lang=\"stylus\" module>\n.test-dialog\n  :global\n    .list\n      .item\n        width: 50px\n        height: 50px\n        background: peru\n        line-height: 50px\n        color: #fff\n        font-size: 12px\n        text-align: center\n        margin-bottom: 10px\n        &.active\n          background: gold\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/test/children/promise-partner/component/test-dialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('vi-popup',{ref:\"popup\",class:_vm.$style['test-dialog'],attrs:{\"is-use-absolute\":true},on:{\"mask-click\":_vm.maskClick}},[_c('div',{staticClass:\"list\"},_vm._l((_vm.options),function(item,index){return _c('div',{key:index,staticClass:\"item\",class:{'active': _vm.cacheData.indexOf(item) !== -1}},[_vm._v(_vm._s(item))])}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cfea84a6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/test/children/promise-partner/component/test-dialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cfea84a6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./test-dialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test-dialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test-dialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cfea84a6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./test-dialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/test/children/promise-partner/component/test-dialog.vue\n// module id = null\n// module chunks = ","<template>\n  <div :class=\"$style['promise-partner']\">\n    <div class=\"box\" @click=\"showDialog\">1</div>\n    <div class=\"box\" @click=\"showDialog\">2</div>\n    <test-dialog\n      ref=\"TestDialog\"\n      :options=\"options\"\n      :data=\"data\">\n    </test-dialog>\n  </div>\n</template>\n\n<script>\nimport TestDialog from './component/test-dialog.vue'\nimport { getRandomInt, shuffle } from '@/common/helpers/utils.js'\n\nconst OPTIONS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexport default {\n  components: {\n    TestDialog\n  },\n  data() {\n    return {\n      options: [],\n      data: [],\n    }\n  },\n  created() {\n    this.setOptionsData()\n  },\n  methods: {\n    showDialog() {\n      this.$refs.TestDialog.show()\n    },\n    // options是随机的\n    createOptions() {\n      let optionsLength = getRandomInt(6, OPTIONS.length)\n      return shuffle(OPTIONS).slice(0, optionsLength)\n    },\n    // data是随机的\n    createData(options) {\n      let optionsLength = options.length - 1\n      let dataLength = getRandomInt(1, optionsLength)\n      return shuffle(options).slice(0, dataLength)\n    },\n    setOptionsData() {\n      let options = this.createOptions()\n      let data = this.createData(options)\n      // created里面正常\n      // this.syncOptionsData(options, data)\n      // created里面正常\n      // this.syncDataOptions(options, data)\n      // create里面正常\n      // this.asyncOptions(options, data)\n      // create里面正常\n      // this.asyncOptions(options, data)\n      // this.asyncData(options, data)\n      // this.asyncOptionsData(options, data)\n      // this.asyncDataOptions(options, data)\n    },\n    // options, data都是同步的,options比data快\n    syncOptionsData(options, data) {\n      this.options = options\n      this.data = data\n    },\n    // options, data都是同步的,options比data慢\n    syncDataOptions(options, data) {\n      this.data = data\n      this.options = options\n    },\n    // options是异步的情况\n    asyncOptions(options, data) {\n      this.data = data\n      window.setTimeout(() => {\n        this.options = options\n      }, 1000)\n    },\n    // data是异步的情况\n    asyncData(options, data) {\n      this.options = options\n      window.setTimeout(() => {\n        this.data = data\n      }, 1000)\n    },\n    // optinos,data都是异步,但是options比data快\n    asyncOptionsData(options, data) {\n      window.setTimeout(() => {\n        this.options = options\n      }, 500)\n      window.setTimeout(() => {\n        this.data = data\n      }, 1000)\n    },\n    // optinos,data都是异步,但是options比data慢\n    asyncDataOptions(options, data) {\n      window.setTimeout(() => {\n        this.data = data\n      }, 500)\n      window.setTimeout(() => {\n        this.options = options\n      }, 1000)\n    },\n  }\n}\n</script>\n\n<style lang=\"stylus\" module>\n.promise-partner {\n  width: 100%;\n  height: 300%;\n  background: #fff;\n  :global {\n    .box {\n      width: 50px;\n      height 50px;\n      background: peru;\n      margin-bottom: 800px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/test/children/promise-partner/promise-partner.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style['promise-partner']},[_c('div',{staticClass:\"box\",on:{\"click\":_vm.showDialog}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('div',{staticClass:\"box\",on:{\"click\":_vm.showDialog}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('test-dialog',{ref:\"TestDialog\",attrs:{\"options\":_vm.options,\"data\":_vm.data}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ff90ffe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/test/children/promise-partner/promise-partner.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0ff90ffe\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./promise-partner.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./promise-partner.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./promise-partner.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ff90ffe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./promise-partner.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/test/children/promise-partner/promise-partner.vue\n// module id = null\n// module chunks = ","// removed by extract-text-webpack-plugin\nmodule.exports = {\"test-dialog\":\"test-dialog-3CwEU_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-cfea84a6\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/test/children/promise-partner/component/test-dialog.vue\n// module id = 8DBO\n// module chunks = 13","// removed by extract-text-webpack-plugin\nmodule.exports = {\"promise-partner\":\"promise-partner-3qIkT_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0ff90ffe\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/test/children/promise-partner/promise-partner.vue\n// module id = TkvC\n// module chunks = 13"],"sourceRoot":""}