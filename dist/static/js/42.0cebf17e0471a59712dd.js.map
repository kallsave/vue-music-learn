{"version":3,"sources":["webpack:///./src/pages/test/children/slow/slow.vue?9e23","webpack:///./src/common/helpers/bom.js","webpack:///./src/common/helpers/slow.js","webpack:///src/pages/test/children/slow/slow.vue","webpack:///./src/pages/test/children/slow/slow.vue?a791","webpack:///./src/pages/test/children/slow/slow.vue"],"names":["module","exports","slow","timeStart","requestAnimationFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","cb","setTimeout","timestamp","Date","getTime","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","easeInOutQuad","t","slow_Move","Move","target","options","classCallCheck_default","this","init","offset","Object","utils","duration","easing","done","run","_this","key","count","begin","requestAnimationFrameId","timeCurrent","isRunning","loop","update","continueHandler","doneHandler","_this2","transform","style","helpers_slow","defaultOptions","children_slow_slow","data","list","methods","clickHandler","e","hadClick","move","translateY","translateX","console","log","stop","test_children_slow_slow","render","_vm","_h","$createElement","_c","_self","class","$style","_l","item","index","staticClass","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/42.0cebf17e0471a59712dd.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"slow\":\"slow-2sydo_0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true,\"localIdentName\":\"[local]-[hash:base64:5]_0\",\"importLoaders\":true,\"modules\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-08750628\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/test/children/slow/slow.vue\n// module id = KECx\n// module chunks = 42","const DEFAULT_INTERVAL = 100 / 6\n\nlet timeStart\n\nexport const requestAnimationFrame = (() => {\n  return window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function (cb) {\n      return window.setTimeout(() => {\n        let timestamp = new Date().getTime()\n        if (!timeStart) {\n          timeStart = timestamp\n        }\n        let timeCurrent = timestamp - timeStart\n        cb(timeCurrent)\n      }, DEFAULT_INTERVAL)\n    }\n})()\n\nexport const cancelAnimationFrame = (() => {\n  return window.cancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.oCancelAnimationFrame ||\n    function (id) {\n      return window.clearTimeout(id)\n    }\n})()\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/helpers/bom.js","import { requestAnimationFrame, cancelAnimationFrame } from './bom.js'\nimport { deepClone } from './utils.js'\n\n// 时间戳,开始的位置,要运动的距离,动画持续的时间\n// function easeInOutQuad(t, b, c, d) {\n//   t /= d / 2\n//   if (t < 1) {\n//     return c / 2 * t * t + b\n//   }\n//   t--\n//   return -c / 2 * (t * (t - 2) - 1) + b\n// }\n\n// 时间占比\nfunction easeInOutQuad(t) {\n  return 1 - (--t * t * t * t)\n}\n\nclass Move {\n  constructor(target, options) {\n    this.init(target, options)\n  }\n  init(target, options) {\n    this.target = target\n    this.offset = deepClone({}, options.offset)\n    this.duration = options.duration\n    this.easing = options.easing\n    this.done = options.done\n    this.run()\n  }\n  run() {\n    for (let key in this.offset) {\n      let count = this.offset[key]\n      this.offset[key] = {\n        begin: 0,\n        count: count\n      }\n    }\n    this.requestAnimationFrameId = requestAnimationFrame((timeCurrent) => {\n      this.timeStart = timeCurrent\n      this.isRunning = true\n      this.loop(timeCurrent)\n    })\n  }\n  loop(timeCurrent) {\n    if (!this.isRunning) {\n      return\n    }\n\n    this.update(timeCurrent)\n    this.timeCurrent < this.duration\n      ? this.continueHandler()\n      : this.doneHandler()\n  }\n  continueHandler() {\n    this.transform()\n    this.requestAnimationFrameId = requestAnimationFrame((timeCurrent) => {\n      this.loop(timeCurrent)\n    })\n  }\n  doneHandler() {\n    this.timeCurrent = this.duration\n    this.transform()\n    if (typeof this.done === 'function') {\n      this.done()\n    }\n  }\n  update(timeCurrent) {\n    this.timeCurrent = timeCurrent - this.timeStart\n  }\n  transform() {\n    let transform = ''\n    for (let key in this.offset) {\n      // 时间戳,开始的位置,要运动的距离,动画持续的时间\n      // 时间戳是变化的,其它不变\n      let timeCurrent = this.timeCurrent\n      let begin = this.offset[key].begin\n      let count = this.offset[key].count\n      let duration = this.duration\n      // 普通缓动公式模式\n      // if (isRunning) {\n      //   let next = this.easing(timeCurrent, begin, count, duration)\n      //   transform += `${key}(${next}px)`\n      // } else {\n      //   transform += `${key}(${count}px)`\n      // }\n      // 时间占比缓动公式模式\n      // DEV: easing没用上\n      if (this.timeCurrent < this.duration) {\n        let now = this.timeCurrent / this.duration\n        let next = (count - begin) * now\n        transform += `${key}(${next}px) `\n      } else {\n        transform += `${key}(${count}px) `\n      }\n    }\n    this.target.style.transform = transform\n  }\n  stop() {\n    // this.isRunning = false\n    cancelAnimationFrame(this.requestAnimationFrameId)\n  }\n}\n\nconst slow = (target, options) => {\n  let defaultOptions = {\n    offset: {},\n    duration: 1000,\n    easing: easeInOutQuad,\n    done: function () {}\n  }\n  return new Move(target, deepClone({}, defaultOptions, options))\n}\n\nexport default slow\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/helpers/slow.js","<template>\n  <div :class=\"$style['slow']\">\n    <div class=\"box\"\n      v-for=\"(item, index) in list\"\n      :key=\"index\"\n      @click=\"clickHandler\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport slow from '@/common/helpers/slow.js'\n\nexport default {\n  data() {\n    return {\n      list: [0, 1]\n    }\n  },\n  methods: {\n    clickHandler(e) {\n      if (!this.hadClick) {\n        this.hadClick = !this.hadClick\n        if (!this.move) {\n          this.move = slow(e.target, {\n            duration: 4000,\n            offset: {\n              translateY: 200,\n              translateX: 200,\n            },\n            done: () => {\n              console.log('done')\n            }\n          })\n        }\n        return\n      }\n      this.move.stop()\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" module>\n.slow\n  height: 100%\n  background: #fff\n  :global\n    .box\n      width: 50px\n      height: 50px\n      background: peru\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/test/children/slow/slow.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style['slow']},_vm._l((_vm.list),function(item,index){return _c('div',{key:index,staticClass:\"box\",on:{\"click\":_vm.clickHandler}})}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-08750628\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/test/children/slow/slow.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  this[\"$style\"] = require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"localIdentName\\\":\\\"[local]-[hash:base64:5]_0\\\",\\\"importLoaders\\\":true,\\\"modules\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-08750628\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./slow.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./slow.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./slow.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08750628\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./slow.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/test/children/slow/slow.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}